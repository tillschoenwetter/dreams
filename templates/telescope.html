<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>DreamAtlas</title>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="icon" href="{{ url_for('static', filename='imgs/favicon.svg') }}">
  <style>
    .body {
      background: black;
    }
    .body {
      background: black;
    }
    body.loading {
      cursor: progress;
    }
  </style>
</head>
<body>
  <div class="circle-container">
    <!-- Only the constellation container is visible -->
    <div class="constellation-container">

      <!-- <div class="header">
        <div class="threshold-slider">
          <label for="similarityRange">Constellation Visibility: <span id="thresholdValue">0.35</span></label>
          <input type="range" min="0.0" max="1.0" step="0.01" value="0.50" id="similarityRange" />
        </div>
      </div> -->

      <!-- Similar dream panel -->
      <!-- <div class="similar-panel-TS" id="similarPanelTS">
        <div class="similar-panel-header" id="similarPanelHeader">
          <span>Most Similar Dreams</span>
          <span id="toggleButton">â€“</span>
        </div>
        <div class="similar-panel-content" id="similarPanelContent">
          <ul>
            {% for s in top_similar %}
              <li onclick="panelClick({{ s[0] }})" style="cursor:pointer;">
                {{ s[1] }}<br><small>Sim: {{ "%.2f"|format(s[2]) }}</small>
              </li>
            {% endfor %}
          </ul>
        </div>
      </div> -->

    <svg id="constellation"></svg>
    <div id="tooltip" class="tooltip" style="display: none;"></div>

      <script>
        var nodes = {{ nodes|tojson }};
        var links = {{ links|tojson }};
        var newDreamId = {{ new_dream_id|tojson }};
      </script>
      <script src="{{ url_for('static', filename='telescope.js') }}"></script>
    </div>

    <!-- Spinner overlay -->
    <div id="preloadSpinner" class="spinner-overlay" style="display: none;">
      <div class="spinner"></div>
    </div>
  </div>




  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const spinner = document.getElementById("preloadSpinner");
      if (spinner) spinner.style.display = "none";
      if (spinner) spinner.style.display = "none";
    });
  </script>
</body>
</html>
